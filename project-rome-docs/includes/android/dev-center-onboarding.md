---
title: Fichier Include
description: Fichier Include
ms.topic: include
ms.assetid: dc4d7bbd-bc87-42b1-9924-52c7bfcd5b5f
ms.localizationpriority: medium
ms.openlocfilehash: d8e94884c742015b08d87e83a9384cbb577695c4
ms.sourcegitcommit: 945a0f4bda02e3b4eb9a665379c2af9bd5285a53
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/18/2019
ms.locfileid: "58907921"
---
## <a name="preliminary-setup-for-push-notifications"></a><span data-ttu-id="59f2d-103">Programme d’installation préliminaire pour les notifications push</span><span class="sxs-lookup"><span data-stu-id="59f2d-103">Preliminary setup for push notifications</span></span>

### <a name="register-your-app-for-push-notifications"></a><span data-ttu-id="59f2d-104">Inscrire votre application pour les notifications push</span><span class="sxs-lookup"><span data-stu-id="59f2d-104">Register your app for push notifications</span></span>

<span data-ttu-id="59f2d-105">Inscrire votre application avec Google pour [Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging/android/client) prennent en charge.</span><span class="sxs-lookup"><span data-stu-id="59f2d-105">Register your application with Google for [Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging/android/client) support.</span></span> <span data-ttu-id="59f2d-106">Veillez à prenez note de l’expéditeur clé ID et le serveur que vous recevez ; vous en aurez besoin plus tard.</span><span class="sxs-lookup"><span data-stu-id="59f2d-106">Be sure to make note of the sender ID and server key that you receive; you'll need them later.</span></span> 

<span data-ttu-id="59f2d-107">Une fois inscrit, vous devez associer les fonctionnalités de notification push avec la plateforme d’appareils connectés dans votre application.</span><span class="sxs-lookup"><span data-stu-id="59f2d-107">Once registered, you must associate push notification functionality with the Connected Devices Platform in your app.</span></span>

```Java
notificationRegistration = new ConnectedDevicesNotificationRegistration();
notificationRegistration.setType(ConnectedDevicesNotificationType.FCM);
notificationRegistration.setToken(token);
notificationRegistration.setAppId(Secrets.FCM_SENDER_ID);
notificationRegistration.setAppDisplayName("SampleApp");

mConnectedDevicesPlatform.getNotificationRegistrationManager().registerForAccountAsync(mConnectedDevicesAccount).whenComplete(() -> {
  // Now that notifications are registered, this account can receive replies to commands and incoming commands.
});
```

### <a name="register-your-app-in-microsoft-windows-dev-center-for-cross-device-experiences"></a><span data-ttu-id="59f2d-108">Inscrire votre application dans Microsoft Windows Dev Center pour des expériences entre les périphériques</span><span class="sxs-lookup"><span data-stu-id="59f2d-108">Register your app in Microsoft Windows Dev Center for cross-device experiences</span></span>
<span data-ttu-id="59f2d-109">Si vous avez besoin de communication sur votre appareil Android, vous devez inscrire votre application pour le [fonctionnalité inter-périphériques expériences du tableau de bord du développeur Microsoft](https://developer.microsoft.com/dashboard/crossplatform/web).</span><span class="sxs-lookup"><span data-stu-id="59f2d-109">If you require communication to your Android device, you need to register your app for the [cross-device experiences feature of the Microsoft Developer Dashboard](https://developer.microsoft.com/dashboard/crossplatform/web).</span></span> <span data-ttu-id="59f2d-110">Il s’agit d’une autre procédure à partir du compte de service administré et AAD inscription d’application ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="59f2d-110">This is a different procedure from MSA and AAD app registration above.</span></span>  <span data-ttu-id="59f2d-111">L’objectif principal de ce processus consiste à mapper les identités d’application spécifiques de plateforme avec une identité d’application multiplateforme qui est reconnu par la plateforme de périphériques connectés et en même temps autorise la plateforme pour envoyer des notifications à l’aide de la notification push native services correspondant à chaque plate-forme mobile.</span><span class="sxs-lookup"><span data-stu-id="59f2d-111">The main goal for this process is to map the platform specific app identities with a cross-platform app identity that is recognized by Connected Devices Platform, and at the same time authorizes the Platform to send notifications using the native push notification services corresponding to each mobile platform.</span></span> <span data-ttu-id="59f2d-112">Dans ce cas, il l’Active assure la communication aux points de terminaison iOS application par le biais de Firebase Cloud Messaging.</span><span class="sxs-lookup"><span data-stu-id="59f2d-112">In this case, it enables it enables communication to iOS app endpoints via Firebase Cloud Messaging.</span></span>

<span data-ttu-id="59f2d-113">Accédez au tableau de bord de centre de développement, accédez à des expériences entre les périphériques à partir du volet de navigation de gauche et sélectionnez la configuration d’une nouvelle application entre les périphériques, indiquée comme suit.</span><span class="sxs-lookup"><span data-stu-id="59f2d-113">Go to Dev Center Dashboard, navigate to Cross-Device Experiences from the left side navigation pane, and select configuring a new cross-device app, shown as below.</span></span>
<span data-ttu-id="59f2d-114">![Tableau de bord de centre de développement, des expériences entre les périphériques](../../notifications/media/dev_center_portal/dev_center_portal_1_overview.png)</span><span class="sxs-lookup"><span data-stu-id="59f2d-114">![Dev Center Dashboard – Cross-Device Experiences](../../notifications/media/dev_center_portal/dev_center_portal_1_overview.png)</span></span>

<span data-ttu-id="59f2d-115">Le processus d’intégration de centre de développement nécessite les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="59f2d-115">The Dev Center on-boarding process requires the following steps:</span></span>
* <span data-ttu-id="59f2d-116">Sélectionnez les plateformes prises en charge : sélectionnez les plateformes où votre application aura une présence et être activée pour des expériences entre les périphériques.</span><span class="sxs-lookup"><span data-stu-id="59f2d-116">Select supported platforms – select the platforms where your app will have a presence and be enabled for cross-device experiences.</span></span> <span data-ttu-id="59f2d-117">Vous pouvez sélectionner à partir de Windows, Android ou iOS.</span><span class="sxs-lookup"><span data-stu-id="59f2d-117">You can select from Windows, Android, and/or iOS.</span></span>
<span data-ttu-id="59f2d-118">![Expériences inter-périphériques – plateformes prises en charge](../../notifications/media/dev_center_portal/dev_center_portal_2_supported_platforms.png)</span><span class="sxs-lookup"><span data-stu-id="59f2d-118">![Cross-Device Experiences – Supported Platforms](../../notifications/media/dev_center_portal/dev_center_portal_2_supported_platforms.png)</span></span>

* <span data-ttu-id="59f2d-119">Fournir l’ID d’application : fournit un ID d’application pour chacun de la plateforme où votre application a une présence.</span><span class="sxs-lookup"><span data-stu-id="59f2d-119">Provide app IDs – provide app IDs for each of the platform where your app has a presence.</span></span> 
<span data-ttu-id="59f2d-120">![Expériences inter-périphériques – ID d’application](../../notifications/media/dev_center_portal/dev_center_portal_3_app_ids.png)</span><span class="sxs-lookup"><span data-stu-id="59f2d-120">![Cross-Device Experiences – App IDs](../../notifications/media/dev_center_portal/dev_center_portal_3_app_ids.png)</span></span>
> [!NOTE]
> <span data-ttu-id="59f2d-121">Vous pouvez ajouter des ID différents (jusqu'à dix) par plateforme, c'est-à-dire au cas où vous avez plusieurs versions de la même application, ou même différentes applications, que vous souhaitez être en mesure de recevoir les mêmes notifications envoyées par votre serveur d’applications ciblant le même utilisateur.</span><span class="sxs-lookup"><span data-stu-id="59f2d-121">You may add different IDs (up to ten) per platform – this is in case you have multiple version of the same app, or even different apps, that want to be able to receive the same notifications sent by your app server targeted at the same user.</span></span> 
> [!TIP] 
> <span data-ttu-id="59f2d-122">Pour les applications Android, ceci est le nom du Package affecté à votre application lorsque vous avez créé le projet.</span><span class="sxs-lookup"><span data-stu-id="59f2d-122">For Android apps, this is the Package Name you assigned to your app when you created the project.</span></span> <span data-ttu-id="59f2d-123">Vous trouverez le nom du Package dans votre console Firebase sous vue d’ensemble du projet -> Général.</span><span class="sxs-lookup"><span data-stu-id="59f2d-123">The Package Name can be found in your Firebase console under Project Overview -> General.</span></span>
<span data-ttu-id="59f2d-124">![Console firebase – vue d’ensemble du projet](../../notifications/media/dev_center_portal/firebase_overview.png)</span><span class="sxs-lookup"><span data-stu-id="59f2d-124">![Firebase Console – Project Overview](../../notifications/media/dev_center_portal/firebase_overview.png)</span></span>

* <span data-ttu-id="59f2d-125">Fournir ou sélectionnez l’ID d’application à partir des inscriptions MSA et/ou AAD.</span><span class="sxs-lookup"><span data-stu-id="59f2d-125">Provide or select the app IDs from MSA and/or AAD app registrations.</span></span> <span data-ttu-id="59f2d-126">Ces ID de client correspondant à l’inscription d’application MSA ou AAD ont été obtenus aux étapes précédentes de l’inscription app MSA/AAD ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="59f2d-126">These client IDs corresponding to MSA or AAD app registration were obtained in the previous MSA/AAD app registration steps from above.</span></span> 
<span data-ttu-id="59f2d-127">![Expériences inter-périphériques – MSA et les inscriptions d’application AAD](../../notifications/media/dev_center_portal/dev_center_portal_4_msa_aad_connections.png)</span><span class="sxs-lookup"><span data-stu-id="59f2d-127">![Cross-Device Experiences – MSA and AAD App Registrations](../../notifications/media/dev_center_portal/dev_center_portal_4_msa_aad_connections.png)</span></span>

* <span data-ttu-id="59f2d-128">Connecté la plateforme d’appareils fonctionnalités tirent parti chaque des plateformes de notification native sur les principales plateformes pour envoyer des notifications au client de l’application points de terminaison, à savoir, WNS (pour Windows UWP), GCM (pour Android) et APNS (pour iOS).</span><span class="sxs-lookup"><span data-stu-id="59f2d-128">Connected Devices Platform capabilities leverage each of the native notification platforms on major platforms to send notifications down to the app client endpoints, namely, WNS (for Windows UWP), GCM (for Android) and APNS (for iOS).</span></span> <span data-ttu-id="59f2d-129">Fournissez vos informations d’identification pour ces plateformes de notification activer la plateforme d’envoyer des notifications pour le serveur de votre application, lorsque vous publiez des notifications ciblées de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="59f2d-129">Provide your credentials for these notification platforms to enable the Platform to deliver the notifications for your app server, when you publish user-targeted notifications.</span></span>
<span data-ttu-id="59f2d-130">![Expériences inter-périphériques – informations d’identification Push](../../notifications/media/dev_center_portal/dev_center_portal_5_push_credentials.png)</span><span class="sxs-lookup"><span data-stu-id="59f2d-130">![Cross-Device Experiences – Push Credentials](../../notifications/media/dev_center_portal/dev_center_portal_5_push_credentials.png)</span></span>
> [!NOTE] 
> <span data-ttu-id="59f2d-131">Pour Android, l’activation de service de messagerie de Cloud est un composant requis pour communiquer avec un appareil Android.</span><span class="sxs-lookup"><span data-stu-id="59f2d-131">For Android, enabling Cloud Messaging service is a prerequisite to communicate with an Android device.</span></span> <span data-ttu-id="59f2d-132">Consultez [défini d’un Firebase Cloud Messaging Application cliente sur Android](https://firebase.google.com/docs/cloud-messaging/android/client) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="59f2d-132">See [Set Up a Firebase Cloud Messaging Client App on Android](https://firebase.google.com/docs/cloud-messaging/android/client) for more details.</span></span> <span data-ttu-id="59f2d-133">Une fois que vous avez terminé l’intégration, vous pouvez ensuite fournir les informations d’identification push via le centre de développement Windows pour la plateforme d’appareils connectés.</span><span class="sxs-lookup"><span data-stu-id="59f2d-133">Once you complete the onboarding, you can then provide the push credentials via Windows Dev Center to the Connected Device Platform.</span></span> 
> [!TIP] 
> <span data-ttu-id="59f2d-134">L’ID d’expéditeur correspond à Firebase Cloud Messaging Sender ID et la clé d’API correspond à la clé du serveur hérité.</span><span class="sxs-lookup"><span data-stu-id="59f2d-134">The required Sender ID is corresponding to Firebase Cloud Messaging Sender ID, and the API key is corresponding to Legacy Server Key.</span></span> <span data-ttu-id="59f2d-135">Les deux peuvent être trouvés dans la Console Firebase -> projet -> Paramètres, sous l’onglet Cloud Messaging, comme illustré dans la capture d’écran.</span><span class="sxs-lookup"><span data-stu-id="59f2d-135">Both can be found in Firebase Console -> Project -> Settings, under the Cloud Messaging tab, as shown in the screenshot.</span></span>
<span data-ttu-id="59f2d-136">![Console firebase – informations d’identification Push Android](../../notifications/media/dev_center_portal/firebase_push_creds.png)</span><span class="sxs-lookup"><span data-stu-id="59f2d-136">![Firebase Console – Android Push Credentials](../../notifications/media/dev_center_portal/firebase_push_creds.png)</span></span>

* <span data-ttu-id="59f2d-137">La dernière étape consiste à vérifier votre domaine inter-périphériques app, qui sert d’un processus de vérification pour prouver que votre application est propriétaire de ce domaine qui agit comme une identité d’application d’entre les périphériques de l’application que vous avez inscrit.</span><span class="sxs-lookup"><span data-stu-id="59f2d-137">The last step is to verify your cross-device app domain, which serves as a verification process to prove that your app has the ownership of this domain which acts like a cross-device app identity for the app you registered.</span></span>
<span data-ttu-id="59f2d-138">![Expériences inter-périphériques – vérification du domaine](../../notifications/media/dev_center_portal/dev_center_portal_6_domain_verification.png)</span><span class="sxs-lookup"><span data-stu-id="59f2d-138">![Cross-Device Experiences – Domain Verification](../../notifications/media/dev_center_portal/dev_center_portal_6_domain_verification.png)</span></span>

### <a name="process-notifications-as-they-are-received-by-the-app"></a><span data-ttu-id="59f2d-139">Traiter les notifications telles qu’elles sont reçues par l’application</span><span class="sxs-lookup"><span data-stu-id="59f2d-139">Process notifications as they are received by the app</span></span>

<span data-ttu-id="59f2d-140">Une fois que l’expérience entre les périphériques dans le Microsoft Windows Dev Center a été validé, assurez-vous que votre application peut traiter les notifications qu’ils vous parviennent.</span><span class="sxs-lookup"><span data-stu-id="59f2d-140">Once the Cross-Device experience within the Microsoft Windows Dev Center has been validated, make sure your app can process the notifications as they come in.</span></span> 

```Java
    ensurePlatformInitialized().thenAccept((ConnectedDevicesPlatform platform) -> {
            ConnectedDevicesProcessNotificationOperation operation = platform.processNotification(data);
        });
```
